package org.sump.analyzer;

import java.io.IOException;
import java.io.OutputStream;

public class GPIOOutputStream extends OutputStream {
	
    // Copied from Device for now to disturb as little as possible

	/** reset analyzer */
	private final static int RESET = 0x00;
	/** arm trigger / run device */
	private final static int RUN = 0x01;
	/** ask for device id */
	private final static int ID = 0x02;

	private static GPIOInputStream is = null;
	@Override
	public void write(int shortCmd) throws IOException {
      if(shortCmd == ID) {
    	  System.out.println("ID Requested.");
    	  is.privateWrite(0x534c4131);
      }
      if (shortCmd == RESET) {
    	  System.out.println("Reset Requested.");
      }
      if (shortCmd == RUN) {
    	  System.out.println("Run Requested.");
      }
	}
	
	public void write(byte[] longCmd) throws IOException {
		write(longCmd[0]);
		
	}
	
	public static void setIs(GPIOInputStream is) {
		GPIOOutputStream.is = is;
	}

}
